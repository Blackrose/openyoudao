from BeautifulSoup import BeautifulSoup
import os
import re
import popen2
def reconstruct():
    homedir = os.getcwd()
    soup = BeautifulSoup(open(homedir +  "/cache/icb.html"))
    #head = BeautifulSoup(open(homedir +  "/cache/construction/icb/head.html"))
    #bodystart = BeautifulSoup(open(homedir +  "/cache/construction/icb/body-start.txt"))
    #bodyend = BeautifulSoup(open(homedir +  "/cache/construction/icb/body-end.txt"))
    head=open('cache/construction/icb/head.html','r') 
    bodystart=open('cache/construction/icb/body-start.txt','r') 
    bodyend=open('cache/construction/icb/body-end.txt','r') 
    result = soup.find('div',{"id":"main_box"})
    sousuo = soup.find('div',{"class":"search_box"})
    fin,fout = popen2.popen2("tee -a cache/result.html")
    fout.write("<html>")
    fout.write(str(head))
    fout.write("<body>")
    fout.write(str(bodystart))
    fout.write("\n")
    fout.write("<div class=\"c-header\">")
    fout.write(str(sousuo))
    fout.write("</div>")
    fout.write(str(result))
    fout.write(str(bodyend))
    fout.write("</body></html>")
    fout.close()
    #os.system("sed -i -e 's/action=\"\/search/action=\"http:\/\/dict.youdao.com\/search/g' cache/result.html")
    #os.system("sed -i -e 's/href=\"\/example/href=\"http:\/\/dict.youdao.com\/example/g' cache/result.html")
    os.system("sed -i -e 's/<\/div><\/div><\/div>/ /g' cache/result.html")
